import{d as O,u as X,f as Y,s as Z,r as i,z as ee,o as r,c as p,a as e,w as g,v as te,g as t,i as E,x as f,J as C,F as B,D as F,E as se,t as d,C as ae,j as oe,h as R,p as le,e as ie,Q as q,K as V,a3 as J,W as D,k as re,a4 as ne}from"./index-CS_LqtFy.js";import{p as de}from"./perm-CFx_5xxQ.js";import{l as ce}from"./laboratory-BdmdquDP.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h=y=>(le("data-v-c5ef8836"),y=y(),ie(),y),pe={class:"container-list"},_e={class:"list-header"},me=h(()=>e("span",null,"Membros do Laboratório",-1)),ve={key:0,class:"info"},fe={key:1,class:"list"},he={class:"span-article"},ge={class:"info"},be=h(()=>e("h3",null,"Nenhum membro diferente do coordenador encontrado!",-1)),ye=[be],ke=h(()=>e("div",{class:"divider"},null,-1)),xe={class:"project-container"},Me={class:"profile-project"},we={class:"box-profile"},Se=["src"],Ce={class:"body-lab"},De={style:{display:"flex","flex-direction":"row","align-items":"center",gap:"1rem","justify-content":"space-between"}},Le=["value"],Be=h(()=>e("button",{style:{padding:"0.6rem"}}," Alterar permissão ",-1)),Ve=h(()=>e("h2",null,"Data de nascimento",-1)),je=h(()=>e("h2",null,"Data de criação",-1)),ze=h(()=>e("h2",null,"Ultima atualização",-1)),Ie=O({__name:"MembrosPage",setup(y){const K=X(),j=Y(),z=Z(),I=de(),N=ce();let l=i(),k=i(""),_=i(),P=i(),x=i(),W=i(!1),b=i(!1),Q=i(!1),M=i(),w=i(),L=i();ee(async()=>{var o,c;b.value=!0,_.value=j.getlaboratory,P.value=j.getUser;const a=(c=(await N.getLaboratory((o=_.value)==null?void 0:o.id,z.getToken)).membros)==null?void 0:c.filter(v=>{var u;return v.id!==((u=_.value)==null?void 0:u.coordenador_id)});M.value=a??[],await $(),b.value=!1});async function $(){var m,a,o,c;if(((a=(m=_.value)==null?void 0:m.permissoes)==null?void 0:a.length)!==0){const v=(c=(o=_.value)==null?void 0:o.permissoes)==null?void 0:c.find(u=>{var n;return u.id_user===((n=P.value)==null?void 0:n.id)});if(v){const n=(await I.getPermissionsLab()).find(S=>S.id===v.id_perm);k.value=n==null?void 0:n.title}else k.value=""}else k.value=""}async function G(m){var o;l.value=m,L.value=await I.getPermissionsLab(),console.log(L);const a=(o=_.value)==null?void 0:o.permissoes;console.log(a)}async function H(){var a,o;Q.value=!0,await N.deleteMember(((a=_.value)==null?void 0:a.id)??"",((o=l.value)==null?void 0:o.id)??"",z.getToken)===!0?(console.log("entrei"),K.push("/dashboard"),b.value=!1):(W.value=!1,b.value=!1,alert("Error ao deletar membro!"))}return(m,a)=>{var o,c,v,u,n,S,T,U,A;return r(),p("div",pe,[e("div",_e,[me,g(e("input",{type:"text",placeholder:"Buscar membro","onUpdate:modelValue":a[0]||(a[0]=s=>E(x)?x.value=s:x=s)},null,512),[[te,t(x)]])]),t(b)?(r(),p("div",ve,[f(t(q),{size:"20px",color:"primary"})])):(r(),p("div",fe,[g(e("div",null,[(r(!0),p(B,null,F(t(M),s=>(r(),R(t(ne),{key:s.id,onClick:re(Ne=>G(s),["prevent"]),dark:"",bordered:"",class:"card-project"},{default:V(()=>[f(t(J),null,{default:V(()=>[e("article",null,[e("h1",null,d(s.primeiro_nome+" "+s.segundo_nome),1),e("p",null,d(s.matricula),1)])]),_:2},1024),f(t(D),{dark:""}),f(t(J),null,{default:V(()=>[e("span",he,d(s.email),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))],512),[[C,((o=t(M))==null?void 0:o.length)!==0]]),g(e("div",ge,ye,512),[[C,((c=t(M))==null?void 0:c.length)===0]])])),ke,g(e("div",xe,[e("section",Me,[e("div",we,[t(l)&&t(l).image?(r(),p("img",{key:0,class:"img-avatar",src:`${(v=t(l))==null?void 0:v.image}`,alt:"Imagem do Laboratorio"},null,8,Se)):se("",!0),e("div",null,[e("h1",null,d(((u=t(l))==null?void 0:u.primeiro_nome)+" "+((n=t(l))==null?void 0:n.segundo_nome)),1),e("p",null,d((S=t(l))==null?void 0:S.email),1)])])]),e("section",Ce,[e("div",De,[g(e("select",{id:"permitions",name:"permitions",required:"","onUpdate:modelValue":a[1]||(a[1]=s=>E(w)?w.value=s:w=s)},[(r(!0),p(B,null,F(t(L),s=>(r(),p("option",{key:s.id,value:s},d(s.title),9,Le))),128))],512),[[ae,t(w)]]),Be]),f(t(D),{class:"divider",dark:""}),e("div",null,[Ve,e("p",null,d((T=t(l))==null?void 0:T.data_nascimento),1)]),f(t(D),{class:"divider",dark:""}),e("div",null,[je,e("p",null,d((U=t(l))==null?void 0:U.data_inicial),1)]),f(t(D),{class:"divider",dark:""}),e("div",null,[ze,e("p",null,d((A=t(l))==null?void 0:A.data_atualizacao),1)]),g(e("footer",null,[e("button",{onClick:a[2]||(a[2]=s=>H())},[t(Q)?(r(),R(t(q),{key:1,size:"20px",color:"primary"})):(r(),p(B,{key:0},[oe(" Deletar membro ")],64))])],512),[[C,t(k)==="Coordenador"]])])],512),[[C,t(l)]])])}}}),Ae=ue(Ie,[["__scopeId","data-v-c5ef8836"]]);export{Ae as default};
