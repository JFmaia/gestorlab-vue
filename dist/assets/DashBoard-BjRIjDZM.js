import{d as X,s as Y,f as Z,H as ee,r as m,u as ae,z as le,I as te,o as i,c as b,w as M,J as P,x as l,K as t,g as e,F as S,L as se,M as oe,N as T,i as $,q as k,O as re,a as v,h,P as z,t as Q,D as A,R as U,S as g,E as C,T as ue,k as ne,U as ie,V as de,W as F,X as ce,j as q,Y as fe,Z as me,_ as ve,$ as _e,a0 as pe,p as be,e as ge}from"./index-CS_LqtFy.js";import{L as N}from"./LoadingPage-DDoa1loc.js";import{c as d}from"./index-CdmU9UX8.js";import{p as ke}from"./perm-CFx_5xxQ.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ye=y=>(be("data-v-c7f88b76"),y=y(),ge(),y),Le={class:"button-bar"},we={class:"menu-button-content"},Se=ye(()=>v("span",null,[q("Gestor"),v("strong",null,"Lab")],-1)),Qe={class:"menu-header"},Ce={class:"menu-lab-profile"},xe=["src"],Me={class:"nameUser"},Pe=["src"],Ue={class:"nameUser"},Ve=X({__name:"DashBoard",setup(y){const V=Y(),p=Z(),E=ke(),H=ee(),B=m(!1),L=m(!1);let c=m(!1),o=m(null),_=m(null),w=m(null),D=m(null),u=m(null),s=m();const R=ae();le(async()=>{L.value=!0,await p.setUser(V.getToken),I(),L.value=!1}),te(()=>{B.value=H.isLoading});function O(){R.push("/pageAcess")}function j(){var f;R.push({name:"profile",params:{id:(f=o.value)==null?void 0:f.id}})}function G(){V.logout(),p.clearUser(),O()}function J(f,r){const a=_.value.find(n=>n.id===f);p.changeLabInState(pe(a),r),I()}async function K(f,r){if(f.length!==0&&f!==null){let a=await E.getPermissionsLab(),n=f.find(x=>x.id_user===r);return a.find(x=>x.id===n.id_perm).title}else return"Membro"}async function I(){if(o.value=p.getUser,_.value=p.getlaboratorys,w.value=p.getlaboratory,o.value.permissao.title==="Admin")s.value=2,u.value=d(s.value);else if(_.value!==null&&_.value.length!==0)if(w.value.coordenador_id===o.value.id)s.value=1,u.value=d(s.value);else switch(D.value=await K(w.value.per,o.value.id),D.value){case"Supervisor":s.value=2,u.value=d(s.value);break;case"Membro":s.value=0,u.value=d(s.value);break;case"Coolaborador":s.value=3,u.value=d(s.value);break;default:s.value=0,u.value=d(s.value)}else switch(o.value.permissao.title){case"Coordenador":s.value=1,u.value=d(s.value);break;case"Membro":s.value=0,u.value=d(s.value);break;case"Colaborador":s.value=3,u.value=d(s.value);break;default:s.value=0,u.value=d(s.value)}}return(f,r)=>(i(),b(S,null,[M(l(N,null,null,512),[[P,L.value]]),M(l(e(_e),{view:"hHh Lpr lff",container:"",class:"shadow-2 rounded-borders"},{default:t(()=>[l(e(se),{elevated:"",class:"top-bar"},{default:t(()=>[l(e(oe),null,{default:t(()=>[l(e(T),{onClick:r[0]||(r[0]=a=>$(c)?c.value=!e(c):c=!e(c)),class:"button-layout"},{default:t(()=>[l(e(k),{name:"menu",size:"1.6rem"})]),_:1}),l(e(re),null,{default:t(()=>[v("button",Le,[v("div",we,[Se,l(e(k),{size:"1.4rem",name:"arrow_drop_down"})]),e(_)!==null&&e(_).length!==0&&e(o).permissao.title!=="Admin"?(i(),h(e(ue),{key:0},{default:t(()=>[l(e(z),{style:{"min-width":"300px","background-color":"#1F2026",border:"1px solid #333335"}},{default:t(()=>[v("div",Qe,[v("span",null,Q(e(o).email),1)]),(i(!0),b(S,null,A(e(_),(a,n)=>(i(),h(e(U),{class:"q-item",key:a.id,clickable:"",onClick:W=>J(a.id,n)},{default:t(()=>[v("div",Ce,[l(e(g),{avatar:""},{default:t(()=>[a.image?(i(),b("img",{key:0,class:"img-menu",src:`${a==null?void 0:a.image}`,alt:"Imagem do Laboratório"},null,8,xe)):C("",!0)]),_:2},1024),l(e(g),null,{default:t(()=>[v("p",Me,Q(a.nome),1)]),_:2},1024)]),M(l(e(k),{name:"check",size:"1.6rem",color:"primary"},null,512),[[P,a.check!==!1]])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):C("",!0)])]),_:1}),l(e(T),{onClick:r[1]||(r[1]=ne(a=>G(),["prevent"])),class:"button-layout"},{default:t(()=>[l(e(k),{name:"logout",size:"1.4rem"})]),_:1})]),_:1})]),_:1}),l(e(ie),{modelValue:e(c),"onUpdate:modelValue":r[3]||(r[3]=a=>$(c)?c.value=a:c=a),"show-if-above":"",width:300,breakpoint:500,style:{"background-color":"#1F2026",border:"1px #333335 solid"}},{default:t(()=>[l(e(de),{class:"fit"},{default:t(()=>[l(e(U),{class:"q-item",clickable:"",onClick:r[2]||(r[2]=a=>j())},{default:t(()=>[l(e(g),{avatar:""},{default:t(()=>{var a;return[e(o)&&e(o).image?(i(),b("img",{key:0,class:"img-avatar",src:`${(a=e(o))==null?void 0:a.image}`,alt:"Imagem do Usuário"},null,8,Pe)):C("",!0)]}),_:1}),l(e(g),null,{default:t(()=>{var a,n;return[v("p",Ue,Q(((a=e(o))==null?void 0:a.primeiro_nome)+" "+((n=e(o))==null?void 0:n.segundo_nome)),1)]}),_:1})]),_:1}),l(e(F),{style:{"background-color":"#333335"}}),l(e(z),null,{default:t(()=>[(i(!0),b(S,null,A(e(u),(a,n)=>(i(),b(S,{key:n},[l(e(ce),{class:"router-link",to:a.link==="laboratory"?{name:a.link,params:{id:e(w).id??"true"}}:{name:a.link}},{default:t(()=>[l(e(U),{clickable:"",active:a.label==="Outbox"},{default:t(()=>[l(e(g),{avatar:""},{default:t(()=>[l(e(k),{name:a.icon},null,8,["name"])]),_:2},1024),l(e(g),null,{default:t(()=>[q(Q(a.label),1)]),_:2},1024)]),_:2},1032,["active"])]),_:2},1032,["to"]),a.separator?(i(),h(e(F),{style:{"background-color":"#333335"},key:"sep"+n})):C("",!0)],64))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(e(fe),null,{default:t(()=>[l(e(me),{style:{padding:"40px"},padding:""},{default:t(()=>[B.value?(i(),h(N,{key:1})):(i(),h(e(ve),{key:0}))]),_:1})]),_:1})]),_:1},512),[[P,!L.value]])],64))}}),$e=he(Ve,[["__scopeId","data-v-c7f88b76"]]);export{$e as default};
