import{d as $e,u as Ce,s as ke,r as y,o as r,h as z,K as x,x as d,g as e,a3 as ie,a as t,q as xe,c as f,w as p,v as h,m as b,i as m,t as u,N as re,k as G,Q as Ie,j as De,F as ne,a5 as Ve,a4 as Le,p as qe,e as Se,f as Pe,y as Ee,z as Me,J as ae,E as Ne,D as ve,a6 as ye,W as se,a7 as Qe}from"./index-DQBdR0Ge.js";import{p as Te}from"./perm-vwS0HX-P.js";import{l as we}from"./laboratory-4uNn5bkM.js";import{M as be}from"./MyCard-OZCsT2q5.js";import{u as Be,c as je,a as q,d as fe}from"./vee-validate.esm-DweLrArM.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _=S=>(qe("data-v-b2d4e241"),S=S(),Se(),S),Fe=_(()=>t("h3",null," Crie seu laboratório ",-1)),ze=["src"],Re={class:"content"},Ke=_(()=>t("label",null,"Laboratório:",-1)),Je={class:"content"},Oe=_(()=>t("label",null,"E-mail:",-1)),We={class:"content"},Ge=_(()=>t("label",null,"Descrição:",-1)),He={class:"content"},Xe=_(()=>t("label",null,"Sobre:",-1)),Ye={class:"row-inputs"},Ze={class:"content",style:{flex:"2"}},et=_(()=>t("label",null,"Logradouro/Rua:",-1)),tt={class:"content",style:{flex:"1"}},ot=_(()=>t("label",null,"Numero:",-1)),lt={class:"row-inputs"},at={class:"content"},st=_(()=>t("label",null,"Bairro:",-1)),nt={class:"content"},it=_(()=>t("label",null,"Cidade:",-1)),rt={class:"content"},dt=_(()=>t("label",null,"Complemento:",-1)),ut={class:"row-inputs"},ct={class:"content"},pt=_(()=>t("label",null,"Estado:",-1)),mt={class:"content"},_t=_(()=>t("label",null,"CEP:",-1)),vt={class:"content"},bt=_(()=>t("label",null,"País:",-1)),ft={class:"box-template"},gt=_(()=>t("span",null,"Template 1",-1)),ht=[gt],yt=_(()=>t("span",null,"Template 2",-1)),$t=[yt],Ct=$e({__name:"ModalCreateLab",emits:["event"],setup(S,{emit:de}){const B=de,ue=Ce(),ce=we(),pe=ke();let n=y(!1),R=y(null),v=y(null),$=y(null),C=y(!1);const{errors:c,validate:K,defineField:i}=Be({validationSchema:je({nome:q().required("O nome é obrigatória!"),descricao:q().required("Por favor descreva um pouco o seu laboratório!"),sobre:q().required("Por favor fale um pouco sobre o seu laboratório!"),template:fe().required("Por favor escolha uma das opções de template!"),email:q().email("Este e-mail não é valido!").required("Por favor digite seu e-mail!"),logradouro:q().required("Digite o nome da sua rua!"),numero:fe().required("Digite o numero da sua casa!"),bairro:q().required("Digite o nome do seu bairro!"),cep:fe().required("Digite seu CEP"),complemento:q().required("Por favor forneça um complemento, será de grande ajuda!"),cidade:q().required("Selecione a cidade que você reside!"),estado:q().required("Selecione o estado que você reside!"),pais:q().required("Selecione o pais que você reside!")})}),[j,me]=i("nome"),[F,_e]=i("sobre"),[J,g]=i("template"),[s,U]=i("descricao"),[V,I]=i("email"),[L,k]=i("logradouro"),[w,H]=i("numero"),[P,X]=i("bairro"),[E,Y]=i("complemento"),[M,Z]=i("cidade"),[N,ee]=i("estado"),[Q,te]=i("cep"),[T,oe]=i("pais");function O(A){C.value=A,A?J.value=1:J.value=2}async function l(){if((await K()).valid){n.value=!0;const o={nome:j.value,sobre:F.value,template:J.value,descricao:s.value,email:V.value,image:v.value,endereco:{logradouro:L.value,numero:w.value,complemento:E.value,bairro:P.value,cidade:M.value,estado:N.value,cep:Q.value,pais:T.value}},a=await ce.createLaboratorio(o,pe.getToken);a===!0?(ue.push("/pageAcess"),B("event",!1),n.value=!1):(n.value=!1,alert(a))}}function le(A){var ge;const a=(ge=A.target.files)==null?void 0:ge[0];if(!a)return;R.value=a;const W=new FileReader;W.onload=Ue=>{var he;v.value=(he=Ue.target)==null?void 0:he.result},W.readAsDataURL(a)}return(A,o)=>(r(),z(e(Le),{class:"card-create-dialog"},{default:x(()=>[d(e(ie),null,{default:x(()=>[Fe]),_:1}),d(e(ie),{class:"section-body"},{default:x(()=>[t("button",{onClick:o[0]||(o[0]=a=>{var W;return(W=e($))==null?void 0:W.click()}),class:"button-img"},[e(v)===null?(r(),z(e(xe),{key:0,name:"add_a_photo",size:"4rem",color:"white",alt:"Imagem para escolher"})):(r(),f("img",{key:1,src:e(v),alt:"Imagem que foi escolhida"},null,8,ze)),t("input",{ref_key:"fileInput",ref:$,type:"file",style:{display:"none"},onChange:le},null,544)]),t("div",Re,[Ke,p(t("input",b({"onUpdate:modelValue":o[1]||(o[1]=a=>m(j)?j.value=a:null)},e(me),{type:"text",placeholder:"digite aqui a sígla do seu laboratório"}),null,16),[[h,e(j)]]),t("pre",null,u(e(c).nome),1)]),t("div",Je,[Oe,p(t("input",b({"onUpdate:modelValue":o[2]||(o[2]=a=>m(V)?V.value=a:null)},e(I),{type:"text",placeholder:"Digite aqui o email do seu laboratório"}),null,16),[[h,e(V)]]),t("pre",null,u(e(c).email),1)]),t("div",We,[Ge,p(t("textarea",b({"onUpdate:modelValue":o[3]||(o[3]=a=>m(s)?s.value=a:null)},e(U),{type:"text",placeholder:"Descreva seu laboratório!"}),null,16),[[h,e(s)]]),t("pre",null,u(e(c).descricao),1)]),t("div",He,[Xe,p(t("textarea",b({"onUpdate:modelValue":o[4]||(o[4]=a=>m(F)?F.value=a:null)},e(_e),{type:"text",placeholder:"Fale sobre seu laboratório!"}),null,16),[[h,e(F)]]),t("pre",null,u(e(c).sobre),1)]),t("div",Ye,[t("div",Ze,[et,p(t("input",b({"onUpdate:modelValue":o[5]||(o[5]=a=>m(L)?L.value=a:null)},e(k),{type:"text",placeholder:"Digite sua rua"}),null,16),[[h,e(L)]]),t("pre",null,u(e(c).logradouro),1)]),t("div",tt,[ot,p(t("input",b({"onUpdate:modelValue":o[6]||(o[6]=a=>m(w)?w.value=a:null)},e(H),{type:"number",placeholder:"Digite o numero da sua casa"}),null,16),[[h,e(w)]]),t("pre",null,u(e(c).numero),1)])]),t("div",lt,[t("div",at,[st,p(t("input",b({"onUpdate:modelValue":o[7]||(o[7]=a=>m(P)?P.value=a:null)},e(X),{type:"text",placeholder:"Digite seu bairro"}),null,16),[[h,e(P)]]),t("pre",null,u(e(c).bairro),1)]),t("div",nt,[it,p(t("input",b({"onUpdate:modelValue":o[8]||(o[8]=a=>m(M)?M.value=a:null)},e(Z),{type:"text",placeholder:"Digite sua cidade"}),null,16),[[h,e(M)]]),t("pre",null,u(e(c).cidade),1)])]),t("div",rt,[dt,p(t("textarea",b({"onUpdate:modelValue":o[9]||(o[9]=a=>m(E)?E.value=a:null)},e(Y),{type:"text",placeholder:"Digite um complemento..."}),null,16),[[h,e(E)]]),t("pre",null,u(e(c).complemento),1)]),t("div",ut,[t("div",ct,[pt,p(t("input",b({"onUpdate:modelValue":o[10]||(o[10]=a=>m(N)?N.value=a:null)},e(ee),{type:"text",placeholder:"Digite seu estado"}),null,16),[[h,e(N)]]),t("pre",null,u(e(c).estado),1)]),t("div",mt,[_t,p(t("input",b({"onUpdate:modelValue":o[11]||(o[11]=a=>m(Q)?Q.value=a:null)},e(te),{type:"number",placeholder:"Digite seu cep"}),null,16),[[h,e(Q)]]),t("pre",null,u(e(c).cep),1)]),t("div",vt,[bt,p(t("input",b({"onUpdate:modelValue":o[12]||(o[12]=a=>m(T)?T.value=a:null)},e(oe),{type:"text",placeholder:"Digite seu país"}),null,16),[[h,e(T)]]),t("pre",null,u(e(c).pais),1)])]),t("div",ft,[t("button",b(e(g),{class:e(C)===!1?"button-template":"button-template-active",onClick:o[13]||(o[13]=a=>O(!e(C)))}),ht,16),t("button",b(e(g),{class:e(C)===!0?"button-template":"button-template-active",onClick:o[14]||(o[14]=a=>O(!e(C)))}),$t,16)]),t("pre",null,u(e(c).template),1)]),_:1}),d(e(Ve),{align:"right",class:"text-primary"},{default:x(()=>[d(e(re),{flat:"",label:"Cancelar",onClick:o[15]||(o[15]=G(a=>B("event",!1),["prevent"]))}),d(e(re),{flat:"",onClick:o[16]||(o[16]=G(a=>l(),["prevent"]))},{default:x(()=>[e(n)?(r(),z(e(Ie),{key:0,color:"dark",size:"1rem"})):(r(),f(ne,{key:1},[De(" Criar Laboratório ")],64))]),_:1})]),_:1})]),_:1}))}}),kt=Ae(Ct,[["__scopeId","data-v-b2d4e241"]]),D=S=>(qe("data-v-ca6d3b6b"),S=S(),Se(),S),xt={key:0,class:"info-container"},Dt=D(()=>t("p",null,"Você não faz parte de nenhum laboratório!",-1)),Vt={key:1,class:"lab-container"},Lt={class:"profile-lab"},qt={class:"box-profile"},St=["src"],wt={onClick:()=>{}},At=D(()=>t("button",{onClick:()=>{}}," Editar o laboratório ",-1)),Ut={class:"body-lab"},It=D(()=>t("h2",null,"Pedidos de acesso",-1)),Pt={key:0,class:"info-empty"},Et=D(()=>t("h3",null,"Não a nenhum pedido de acesso para esse laboratório!",-1)),Mt=[Et],Nt={key:1},Qt=D(()=>t("h2",null,"Membros",-1)),Tt={key:0,class:"info-empty"},Bt=D(()=>t("h3",null,"Não a nenhum membro no laboratório!",-1)),jt=[Bt],Ft={key:1},zt=D(()=>t("h2",null,"Projetos",-1)),Rt={key:0,class:"info-empty"},Kt=D(()=>t("h3",null,"Não a nenhum projeto no laboratório!",-1)),Jt=[Kt],Ot={key:1},Wt=D(()=>t("h2",null,"Descrição",-1)),Gt=D(()=>t("h2",null,"Sobre",-1)),Ht=D(()=>t("div",{class:"text-h6"}," Confirme o nome do Laboratório ",-1)),Xt=$e({__name:"MyLaboratory",emits:["event"],setup(S){const de=Ce(),B=Pe(),ue=Te(),ce=we(),pe=ke();let n=y(),R=y(),v=y(""),$=y(!1),C=y(),c=y(!0),K=y(),i=y(!1);Ee(C,g=>{var s;g===((s=n.value)==null?void 0:s.nome)?c.value=!1:c.value=!0}),Me(async()=>{n.value=B.getlaboratory,R.value=B.getUser,K.value=B.getPedidosAtivos(),await me()});async function j(g){i.value=g}async function me(){var g,s,U,V;if(((s=(g=n.value)==null?void 0:g.permissoes)==null?void 0:s.length)!==0){const I=(V=(U=n.value)==null?void 0:U.permissoes)==null?void 0:V.find(L=>{var k;return L.id_user===((k=R.value)==null?void 0:k.id)});if(I){const k=(await ue.getPermissionsLab()).find(w=>w.id===I.id_perm);v.value=k==null?void 0:k.title}else v.value=""}else v.value=""}async function F(){$.value=!0}async function _e(){var s;const g=await ce.deleteLaboratorio(((s=n.value)==null?void 0:s.id)??"",pe.getToken);g?de.push("/pageAcess"):($.value=!1,alert(g))}function J(){i.value=!0}return(g,s)=>{var U,V,I,L,k,w,H,P,X,E,Y,M,Z,N,ee,Q,te,T,oe,O;return e(n)===null?(r(),f("div",xt,[Dt,p(t("button",{onClick:s[0]||(s[0]=G(l=>J(),["prevent"]))}," Crie seu Laboratório ",512),[[ae,((V=(U=e(R))==null?void 0:U.permissao)==null?void 0:V.title)==="Coordenador"]]),d(e(ye),{modelValue:e(i),"onUpdate:modelValue":s[1]||(s[1]=l=>m(i)?i.value=l:i=l)},{default:x(()=>[d(kt,{onEvent:j})]),_:1},8,["modelValue"])])):(r(),f("div",Vt,[t("section",Lt,[t("div",qt,[e(n)&&e(n).image?(r(),f("img",{key:0,class:"img-avatar",src:`${(I=e(n))==null?void 0:I.image}`,alt:"Imagem do Laboratorio"},null,8,St)):Ne("",!0),t("div",null,[t("h1",null,u((L=e(n))==null?void 0:L.nome),1),t("p",null,u((k=e(n))==null?void 0:k.descricao),1),t("span",wt,[d(e(xe),{name:"groups",size:"1.2rem"}),De(" "+u((H=(w=e(n))==null?void 0:w.membros)==null?void 0:H.length),1)])]),At])]),t("section",Ut,[p(t("div",null,[It,((P=e(K))==null?void 0:P.length)===0?(r(),f("article",Pt,Mt)):(r(),f("ul",Nt,[(r(!0),f(ne,null,ve(e(K),l=>{var le,A;return r(),z(be,{key:l.id??"",type:1,"id-pend":l.id??"","id-user":l.id_user??"","id-lab":l.id_lab??"","nome-user":`${(le=l.usuario)==null?void 0:le.primeiro_nome} ${(A=l.usuario)==null?void 0:A.segundo_nome}`,"date-create":l.data_create??""},null,8,["id-pend","id-user","id-lab","nome-user","date-create"])}),128))]))],512),[[ae,e(v)==="Coordenador"||e(v)==="Supervisor"]]),p(d(e(se),{class:"divider"},null,512),[[ae,e(v)==="Coordenador"||e(v)==="Supervisor"]]),t("div",null,[Qt,((E=(X=e(n))==null?void 0:X.membros)==null?void 0:E.length)===0?(r(),f("article",Tt,jt)):(r(),f("ul",Ft,[(r(!0),f(ne,null,ve((Y=e(n))==null?void 0:Y.membros,l=>(r(),z(be,{key:l.id??"",type:3,summary:e(v),"id-user":l.id??"",title:`${l.primeiro_nome} ${l.segundo_nome}`,"date-create":l.data_inicial??""},null,8,["summary","id-user","title","date-create"]))),128))]))]),d(e(se),{class:"divider"}),t("div",null,[zt,((Z=(M=e(n))==null?void 0:M.projetos)==null?void 0:Z.length)===0||((ee=(N=e(n))==null?void 0:N.projetos)==null?void 0:ee.length)===null||((te=(Q=e(n))==null?void 0:Q.projetos)==null?void 0:te.length)===void 0?(r(),f("article",Rt,Jt)):(r(),f("ul",Ot,[(r(!0),f(ne,null,ve((T=e(n))==null?void 0:T.projetos,l=>(r(),z(be,{key:l.id??"",type:2,"id-user":l.autor_id??"",title:l.titulo,"id-lab":l.laboratorio_id??"","id-projeto":l.id??"","date-create":l.data_inicial??""},null,8,["id-user","title","id-lab","id-projeto","date-create"]))),128))]))]),d(e(se),{class:"divider",dark:""}),t("div",null,[Wt,t("p",null,u((oe=e(n))==null?void 0:oe.descricao),1)]),d(e(se),{class:"divider",dark:""}),t("div",null,[Gt,t("p",null,u((O=e(n))==null?void 0:O.sobre),1)]),p(t("footer",null,[t("button",{onClick:s[2]||(s[2]=l=>F())}," Deletar Laboratorio ")],512),[[ae,e(v)==="Coordenador"]])]),d(e(ye),{modelValue:e($),"onUpdate:modelValue":s[6]||(s[6]=l=>m($)?$.value=l:$=l)},{default:x(()=>[d(e(Le),{class:"card-dialog"},{default:x(()=>[d(e(ie),null,{default:x(()=>[Ht]),_:1}),d(e(ie),{class:"q-pt-none"},{default:x(()=>[p(t("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>m(C)?C.value=l:C=l),onKeyup:Qe(()=>{},["enter"])},null,544),[[h,e(C)]])]),_:1}),d(e(Ve),{align:"right",class:"text-primary"},{default:x(()=>[d(e(re),{flat:"",label:"Cancelar",onClick:s[4]||(s[4]=G(l=>m($)?$.value=!1:$=!1,["prevent"]))}),d(e(re),{disabled:e(c),flat:"",label:"Deletar",onClick:s[5]||(s[5]=G(l=>_e(),["prevent"]))},null,8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}}),ao=Ae(Xt,[["__scopeId","data-v-ca6d3b6b"]]);export{ao as default};
