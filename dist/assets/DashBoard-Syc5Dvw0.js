import{d as Y,s as Z,f as ee,H as ae,r as v,u as le,z as te,I as se,o as d,c as g,w as M,J as P,x as l,K as t,g as e,F as S,L as oe,M as re,N as T,i as $,q as k,O as ue,a as m,h as y,P as z,t as Q,D as A,R as U,S as b,E as C,T as ne,k as ie,U as de,V as ce,W as F,X as fe,j as q,Y as ve,Z as me,_ as _e,$ as pe,a0 as ge,p as be,e as he}from"./index-DQb3qgME.js";import{L as N}from"./LoadingPage-DCTV78xE.js";import{c}from"./index-CdmU9UX8.js";import{p as ke}from"./perm-B5m12WYu.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Le=L=>(be("data-v-4616c82d"),L=L(),he(),L),we={class:"button-bar"},Se={class:"menu-button-content"},Qe=Le(()=>m("span",null,[q("Gestor"),m("strong",null,"Lab")],-1)),Ce={class:"menu-header"},xe={class:"menu-lab-profile"},Me=["src"],Pe={class:"nameUser"},Ue=["src"],Ve={class:"nameUser"},Be=Y({__name:"DashBoard",setup(L){const V=Z(),p=ee(),E=ke(),H=ae(),B=v(!1),w=v(!1);let f=v(!1),o=v(null),_=v(null),h=v(null),D=v(null),u=v(null),s=v();const R=le();te(async()=>{w.value=!0,await p.setUser(V.getToken),I(),w.value=!1}),se(()=>{B.value=H.isLoading});function O(){R.push("/pageAcess")}function j(){var n;R.push({name:"profile",params:{id:(n=o.value)==null?void 0:n.id}})}function G(){V.logout(),p.clearUser(),O()}function J(n,r){const a=_.value.find(i=>i.id===n);p.changeLabInState(ge(a),r),I()}async function K(n,r){if(n.length!==0&&n!==null){let a=await E.getPermissionsLab(),i=n.find(x=>x.id_user===r);return a.find(x=>x.id===i.id_perm).title}else return"Membro"}function W(n){if(h.value)switch(n){case"laboratorios":case"laboratory":return h.value.id??"null";default:return"null"}else return"null"}async function I(){if(o.value=p.getUser,_.value=p.getlaboratorys,h.value=p.getlaboratory,o.value.permissao.title==="Admin")s.value=2,u.value=c(s.value);else if(_.value!==null&&_.value.length!==0)if(h.value.coordenador_id===o.value.id)s.value=1,u.value=c(s.value);else switch(D.value=await K(h.value.per,o.value.id),D.value){case"Supervisor":s.value=2,u.value=c(s.value);break;case"Membro":s.value=0,u.value=c(s.value);break;case"Coolaborador":s.value=3,u.value=c(s.value);break;default:s.value=0,u.value=c(s.value)}else switch(o.value.permissao.title){case"Coordenador":s.value=1,u.value=c(s.value);break;case"Membro":s.value=0,u.value=c(s.value);break;case"Colaborador":s.value=3,u.value=c(s.value);break;default:s.value=0,u.value=c(s.value)}}return(n,r)=>(d(),g(S,null,[M(l(N,null,null,512),[[P,w.value]]),M(l(e(pe),{view:"hHh Lpr lff",container:"",class:"shadow-2 rounded-borders"},{default:t(()=>[l(e(oe),{elevated:"",class:"top-bar"},{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(T),{onClick:r[0]||(r[0]=a=>$(f)?f.value=!e(f):f=!e(f)),class:"button-layout"},{default:t(()=>[l(e(k),{name:"menu",size:"1.6rem"})]),_:1}),l(e(ue),null,{default:t(()=>[m("button",we,[m("div",Se,[Qe,l(e(k),{size:"1.4rem",name:"arrow_drop_down"})]),e(_)!==null&&e(_).length!==0&&e(o).permissao.title!=="Admin"?(d(),y(e(ne),{key:0},{default:t(()=>[l(e(z),{style:{"min-width":"300px","background-color":"#1F2026",border:"1px solid #333335"}},{default:t(()=>[m("div",Ce,[m("span",null,Q(e(o).email),1)]),(d(!0),g(S,null,A(e(_),(a,i)=>(d(),y(e(U),{class:"q-item",key:a.id,clickable:"",onClick:X=>J(a.id,i)},{default:t(()=>[m("div",xe,[l(e(b),{avatar:""},{default:t(()=>[a.image?(d(),g("img",{key:0,class:"img-menu",src:`${a==null?void 0:a.image}`,alt:"Imagem do Laboratório"},null,8,Me)):C("",!0)]),_:2},1024),l(e(b),null,{default:t(()=>[m("p",Pe,Q(a.nome),1)]),_:2},1024)]),M(l(e(k),{name:"check",size:"1.6rem",color:"primary"},null,512),[[P,a.check!==!1]])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):C("",!0)])]),_:1}),l(e(T),{onClick:r[1]||(r[1]=ie(a=>G(),["prevent"])),class:"button-layout"},{default:t(()=>[l(e(k),{name:"logout",size:"1.4rem"})]),_:1})]),_:1})]),_:1}),l(e(de),{modelValue:e(f),"onUpdate:modelValue":r[3]||(r[3]=a=>$(f)?f.value=a:f=a),"show-if-above":"",width:300,breakpoint:500,style:{"background-color":"#1F2026",border:"1px #333335 solid"}},{default:t(()=>[l(e(ce),{class:"fit"},{default:t(()=>[l(e(U),{class:"q-item",clickable:"",onClick:r[2]||(r[2]=a=>j())},{default:t(()=>[l(e(b),{avatar:""},{default:t(()=>{var a;return[e(o)&&e(o).image?(d(),g("img",{key:0,class:"img-avatar",src:`${(a=e(o))==null?void 0:a.image}`,alt:"Imagem do Usuário"},null,8,Ue)):C("",!0)]}),_:1}),l(e(b),null,{default:t(()=>{var a,i;return[m("p",Ve,Q(((a=e(o))==null?void 0:a.primeiro_nome)+" "+((i=e(o))==null?void 0:i.segundo_nome)),1)]}),_:1})]),_:1}),l(e(F),{style:{"background-color":"#333335"}}),l(e(z),null,{default:t(()=>[(d(!0),g(S,null,A(e(u),(a,i)=>(d(),g(S,{key:i},[l(e(fe),{class:"router-link",to:a.value===1?{name:a.link,params:{id:W(a.link)}}:{name:a.link}},{default:t(()=>[l(e(U),{clickable:"",active:a.label==="Outbox"},{default:t(()=>[l(e(b),{avatar:""},{default:t(()=>[l(e(k),{name:a.icon},null,8,["name"])]),_:2},1024),l(e(b),null,{default:t(()=>[q(Q(a.label),1)]),_:2},1024)]),_:2},1032,["active"])]),_:2},1032,["to"]),a.separator?(d(),y(e(F),{style:{"background-color":"#333335"},key:"sep"+i})):C("",!0)],64))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(e(ve),null,{default:t(()=>[l(e(me),{style:{padding:"40px"},padding:""},{default:t(()=>[B.value?(d(),y(N,{key:1})):(d(),y(e(_e),{key:0}))]),_:1})]),_:1})]),_:1},512),[[P,!w.value]])],64))}}),ze=ye(Be,[["__scopeId","data-v-4616c82d"]]);export{ze as default};
