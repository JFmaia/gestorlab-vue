import{d as te,u as ae,s as oe,r as h,o as c,h as C,K as d,x as u,g as e,a3 as B,a as o,q as se,c as D,w as Q,v as V,m as F,i as M,t as R,N as $,k as A,Q as le,j as re,F as ie,a5 as ne,a4 as ce,p as de,e as ue}from"./index-DQb3qgME.js";import{u as pe,c as me,a as L}from"./vee-validate.esm-Bvbop3-v.js";import{p as fe}from"./MyCard-D9OjYwNM.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k=r=>(de("data-v-52515a1a"),r=r(),ue(),r),ve=k(()=>o("h3",null," Crie um projeto ",-1)),he=["src"],_e={class:"content"},ye=k(()=>o("label",null,"Projeto:",-1)),je={class:"content"},we=k(()=>o("label",null,"Descrição:",-1)),Ce=te({__name:"ModalCreateProject",props:{idLab:{type:String,required:!0}},emits:["event"],setup(r,{emit:N}){const x=N,U=r,T=ae(),z=fe(),E=oe();let p=h(!1),H=h(null),m=h(null),I=h(null);const{errors:b,validate:K,defineField:S}=pe({validationSchema:me({titulo:L().required("O titulo é obrigatorio!"),descricao:L().required("Por favor descreva um pouco o seu projeto!")})}),[f,O]=S("titulo"),[g,W]=S("descricao");async function G(){if((await K()).valid){p.value=!0;const t={titulo:f.value,descricao:g.value,image:m.value,id:U.idLab},a=await z.createProjeto(t,E.getToken);a===!0?(T.push("/dashboard/projetos"),x("event",!1),p.value=!1):(p.value=!1,alert(a))}}function J(_){var P;const a=(P=_.target.files)==null?void 0:P[0];if(!a)return;H.value=a;const i=new FileReader;i.onload=async X=>{var q;const n=new Image;n.src=(q=X.target)==null?void 0:q.result,await new Promise(ee=>{n.onload=()=>ee()});const y=800,j=600,Y=.7,v=document.createElement("canvas"),w=v.getContext("2d");let s=n.width,l=n.height;s>y&&(l=l*y/s,s=y),l>j&&(s=s*j/l,l=j),v.width=s,v.height=l,w==null||w.drawImage(n,0,0,s,l);const Z=v.toDataURL("image/jpeg",Y);m.value=Z},i.readAsDataURL(a)}return(_,t)=>(c(),C(e(ce),{class:"card-create-dialog"},{default:d(()=>[u(e(B),null,{default:d(()=>[ve]),_:1}),u(e(B),{class:"section-body"},{default:d(()=>[o("button",{onClick:t[0]||(t[0]=a=>{var i;return(i=e(I))==null?void 0:i.click()}),class:"button-img"},[e(m)===null?(c(),C(e(se),{key:0,name:"add_a_photo",size:"4rem",color:"white",alt:"Imagem para escolher"})):(c(),D("img",{key:1,src:e(m),alt:"Imagem que foi escolhida"},null,8,he)),o("input",{ref_key:"fileInput",ref:I,type:"file",style:{display:"none"},onChange:J},null,544)]),o("div",_e,[ye,Q(o("input",F({"onUpdate:modelValue":t[1]||(t[1]=a=>M(f)?f.value=a:null)},e(O),{type:"text",placeholder:"digite aqui o nome do seu projeto"}),null,16),[[V,e(f)]]),o("pre",null,R(e(b).titulo),1)]),o("div",je,[we,Q(o("textarea",F({"onUpdate:modelValue":t[2]||(t[2]=a=>M(g)?g.value=a:null)},e(W),{type:"text",placeholder:"Descreva seu projeto!"}),null,16),[[V,e(g)]]),o("pre",null,R(e(b).descricao),1)])]),_:1}),u(e(ne),{align:"right",class:"text-primary"},{default:d(()=>[u(e($),{flat:"",label:"Cancelar",onClick:t[3]||(t[3]=A(a=>x("event",!1),["prevent"]))}),u(e($),{flat:"",onClick:t[4]||(t[4]=A(a=>G(),["prevent"]))},{default:d(()=>[e(p)?(c(),C(e(le),{key:0,color:"dark",size:"1rem"})):(c(),D(ie,{key:1},[re(" Criar Projeto ")],64))]),_:1})]),_:1})]),_:1}))}}),Se=ge(Ce,[["__scopeId","data-v-52515a1a"]]);export{Se as M};
