import{d as Le,s as Ve,r as f,z as De,o as u,h as X,K as L,x as i,g as e,a3 as de,a as o,q as qe,c as _,w as m,v as C,m as y,i as v,t as c,N as ce,k as Y,Q as we,F as Z,j as ge,E as ye,a5 as Se,a4 as Ue,p as Ae,e as Pe,u as Me,l as Ne,f as Qe,y as je,J as ue,D as Ce,a6 as be,W as _e,a7 as Be}from"./index-CS_LqtFy.js";import{p as ze}from"./perm-CFx_5xxQ.js";import{l as Ee}from"./laboratory-BdmdquDP.js";import{M as $e}from"./MyCard-BZ2yIT6q.js";import{u as Fe,c as Re,a as U,d as fe}from"./vee-validate.esm-3qQCVtCt.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const g=w=>(Ae("data-v-00211e0e"),w=w(),Pe(),w),Ke=g(()=>o("h3",null," Crie seu laboratório ",-1)),Oe=["src"],Je={class:"content"},We=g(()=>o("label",null,"Laboratório:",-1)),Ge={class:"content"},He=g(()=>o("label",null,"E-mail:",-1)),Xe={class:"content"},Ye=g(()=>o("label",null,"Descrição:",-1)),Ze={class:"content"},eo=g(()=>o("label",null,"Sobre:",-1)),oo={class:"row-inputs"},to={class:"content",style:{flex:"2"}},ao=g(()=>o("label",null,"Logradouro/Rua:",-1)),lo={class:"content",style:{flex:"1"}},so=g(()=>o("label",null,"Numero:",-1)),ro={class:"row-inputs"},no={class:"content"},io=g(()=>o("label",null,"Bairro:",-1)),uo={class:"content"},co=g(()=>o("label",null,"Cidade:",-1)),po={class:"content"},mo=g(()=>o("label",null,"Complemento:",-1)),vo={class:"row-inputs"},bo={class:"content"},_o=g(()=>o("label",null,"Estado:",-1)),fo={class:"content"},go=g(()=>o("label",null,"CEP:",-1)),yo={class:"content"},ho=g(()=>o("label",null,"País:",-1)),ko={class:"box-template"},Co=g(()=>o("span",null,"Template 1",-1)),$o=[Co],xo=g(()=>o("span",null,"Template 2",-1)),Lo=[xo],Vo=Le({__name:"ModalCreateLab",props:{tipo:{type:Number,required:!0},laboratorio:{type:Object,required:!1,default:null}},emits:["event"],setup(w,{emit:pe}){const K=pe,n=w,ee=Ee(),O=Ve();let A=f(!1),r=f(null),P=f(null),V=f(null),b=f(!1);const{errors:d,validate:J,defineField:p}=Fe({validationSchema:Re({nome:U().required("O nome é obrigatória!"),descricao:U().required("Por favor descreva um pouco o seu laboratório!"),sobre:U().required("Por favor fale um pouco sobre o seu laboratório!"),template:fe().required("Por favor escolha uma das opções de template!"),email:U().email("Este e-mail não é valido!").required("Por favor digite seu e-mail!"),logradouro:U().required("Digite o nome da sua rua!"),numero:fe().required("Digite o numero da sua casa!"),bairro:U().required("Digite o nome do seu bairro!"),cep:fe().required("Digite seu CEP"),complemento:U().required("Por favor forneça um complemento, será de grande ajuda!"),cidade:U().required("Selecione a cidade que você reside!"),estado:U().required("Selecione o estado que você reside!"),pais:U().required("Selecione o pais que você reside!")})}),[h,M]=p("nome"),[S,oe]=p("sobre"),[N,W]=p("template"),[Q,me]=p("descricao"),[j,ve]=p("email"),[B,k]=p("logradouro"),[s,F]=p("numero"),[$,R]=p("bairro"),[x,D]=p("complemento"),[q,te]=p("cidade"),[E,ae]=p("estado"),[I,le]=p("cep"),[T,se]=p("pais");De(()=>{re()});function re(){if(n.tipo===2)h.value=n.laboratorio.nome,S.value=n.laboratorio.sobre,N.value=n.laboratorio.template,Q.value=n.laboratorio.descricao,B.value=n.laboratorio.endereco.logradouro,$.value=n.laboratorio.endereco.bairro,s.value=n.laboratorio.endereco.numero,j.value=n.laboratorio.email,q.value=n.laboratorio.endereco.cidade,x.value=n.laboratorio.endereco.complemento,I.value=n.laboratorio.endereco.cep,E.value=n.laboratorio.endereco.estado,T.value=n.laboratorio.endereco.pais;else return}async function ne(){if((await J()).valid)if(A.value=!0,n.tipo===1){const t={nome:h.value,sobre:S.value,template:N.value,descricao:Q.value,email:j.value,image:P.value,endereco:{logradouro:B.value,numero:s.value,complemento:x.value,bairro:$.value,cidade:q.value,estado:E.value,cep:I.value,pais:T.value}},a=await ee.createLaboratorio(t,O.getToken);a===!0?(K("event",!1),A.value=!1):(A.value=!1,alert(a))}else{const t={nome:h.value,sobre:S.value,template:N.value,descricao:Q.value,email:j.value,image:P.value,endereco:{logradouro:B.value,numero:s.value,complemento:x.value,bairro:$.value,cidade:q.value,estado:E.value,cep:I.value,pais:T.value}},a=await ee.editLaboratorio(t,n.laboratorio.id,O.getToken);a===!0?(K("event",!1),A.value=!1):(A.value=!1,alert(a))}}function G(l){b.value=l,l?N.value=1:N.value=2}function ie(l){var he;const a=(he=l.target.files)==null?void 0:he[0];if(!a)return;r.value=a;const H=new FileReader;H.onload=Te=>{var ke;P.value=(ke=Te.target)==null?void 0:ke.result},H.readAsDataURL(a)}return(l,t)=>(u(),X(e(Ue),{class:"card-create-dialog"},{default:L(()=>[i(e(de),null,{default:L(()=>[Ke]),_:1}),i(e(de),{class:"section-body"},{default:L(()=>[o("button",{onClick:t[0]||(t[0]=a=>{var H;return(H=e(V))==null?void 0:H.click()}),class:"button-img"},[e(P)===null?(u(),X(e(qe),{key:0,name:"add_a_photo",size:"4rem",color:"white",alt:"Imagem para escolher"})):(u(),_("img",{key:1,src:e(P),alt:"Imagem que foi escolhida"},null,8,Oe)),o("input",{ref_key:"fileInput",ref:V,type:"file",style:{display:"none"},onChange:ie},null,544)]),o("div",Je,[We,m(o("input",y({"onUpdate:modelValue":t[1]||(t[1]=a=>v(h)?h.value=a:null)},e(M),{type:"text",placeholder:"digite aqui a sígla do seu laboratório"}),null,16),[[C,e(h)]]),o("pre",null,c(e(d).nome),1)]),o("div",Ge,[He,m(o("input",y({"onUpdate:modelValue":t[2]||(t[2]=a=>v(j)?j.value=a:null)},e(ve),{type:"text",placeholder:"Digite aqui o email do seu laboratório"}),null,16),[[C,e(j)]]),o("pre",null,c(e(d).email),1)]),o("div",Xe,[Ye,m(o("textarea",y({"onUpdate:modelValue":t[3]||(t[3]=a=>v(Q)?Q.value=a:null)},e(me),{type:"text",placeholder:"Descreva seu laboratório!"}),null,16),[[C,e(Q)]]),o("pre",null,c(e(d).descricao),1)]),o("div",Ze,[eo,m(o("textarea",y({"onUpdate:modelValue":t[4]||(t[4]=a=>v(S)?S.value=a:null)},e(oe),{type:"text",placeholder:"Fale sobre seu laboratório!"}),null,16),[[C,e(S)]]),o("pre",null,c(e(d).sobre),1)]),o("div",oo,[o("div",to,[ao,m(o("input",y({"onUpdate:modelValue":t[5]||(t[5]=a=>v(B)?B.value=a:null)},e(k),{type:"text",placeholder:"Digite sua rua"}),null,16),[[C,e(B)]]),o("pre",null,c(e(d).logradouro),1)]),o("div",lo,[so,m(o("input",y({"onUpdate:modelValue":t[6]||(t[6]=a=>v(s)?s.value=a:null)},e(F),{type:"number",placeholder:"Digite o numero da sua casa"}),null,16),[[C,e(s)]]),o("pre",null,c(e(d).numero),1)])]),o("div",ro,[o("div",no,[io,m(o("input",y({"onUpdate:modelValue":t[7]||(t[7]=a=>v($)?$.value=a:null)},e(R),{type:"text",placeholder:"Digite seu bairro"}),null,16),[[C,e($)]]),o("pre",null,c(e(d).bairro),1)]),o("div",uo,[co,m(o("input",y({"onUpdate:modelValue":t[8]||(t[8]=a=>v(q)?q.value=a:null)},e(te),{type:"text",placeholder:"Digite sua cidade"}),null,16),[[C,e(q)]]),o("pre",null,c(e(d).cidade),1)])]),o("div",po,[mo,m(o("textarea",y({"onUpdate:modelValue":t[9]||(t[9]=a=>v(x)?x.value=a:null)},e(D),{type:"text",placeholder:"Digite um complemento..."}),null,16),[[C,e(x)]]),o("pre",null,c(e(d).complemento),1)]),o("div",vo,[o("div",bo,[_o,m(o("input",y({"onUpdate:modelValue":t[10]||(t[10]=a=>v(E)?E.value=a:null)},e(ae),{type:"text",placeholder:"Digite seu estado"}),null,16),[[C,e(E)]]),o("pre",null,c(e(d).estado),1)]),o("div",fo,[go,m(o("input",y({"onUpdate:modelValue":t[11]||(t[11]=a=>v(I)?I.value=a:null)},e(le),{type:"number",placeholder:"Digite seu cep"}),null,16),[[C,e(I)]]),o("pre",null,c(e(d).cep),1)]),o("div",yo,[ho,m(o("input",y({"onUpdate:modelValue":t[12]||(t[12]=a=>v(T)?T.value=a:null)},e(se),{type:"text",placeholder:"Digite seu país"}),null,16),[[C,e(T)]]),o("pre",null,c(e(d).pais),1)])]),o("div",ko,[o("button",y(e(W),{class:e(b)===!1?"button-template":"button-template-active",onClick:t[13]||(t[13]=a=>G(!e(b)))}),$o,16),o("button",y(e(W),{class:e(b)===!0?"button-template":"button-template-active",onClick:t[14]||(t[14]=a=>G(!e(b)))}),Lo,16)]),o("pre",null,c(e(d).template),1)]),_:1}),i(e(Se),{align:"right",class:"text-primary"},{default:L(()=>[i(e(ce),{flat:"",label:"Cancelar",onClick:t[15]||(t[15]=Y(a=>K("event",!1),["prevent"]))}),i(e(ce),{flat:"",onClick:t[16]||(t[16]=Y(a=>ne(),["prevent"]))},{default:L(()=>[e(A)?(u(),X(e(we),{key:0,color:"primary",size:"1rem"})):(u(),_(Z,{key:1},[n.tipo===1?(u(),_(Z,{key:0},[ge(" Criar Laboratório ")],64)):ye("",!0),n.tipo===2?(u(),_(Z,{key:1},[ge(" Editar Laboratório ")],64)):ye("",!0)],64))]),_:1})]),_:1})]),_:1}))}}),xe=Ie(Vo,[["__scopeId","data-v-00211e0e"]]),z=w=>(Ae("data-v-f719873c"),w=w(),Pe(),w),Do={key:0,class:"loading"},qo={key:1},wo={key:0,class:"info-container"},So=z(()=>o("p",null,"Você não faz parte de nenhum laboratório!",-1)),Uo={key:1,class:"lab-container"},Ao={class:"profile-lab"},Po={class:"box-profile"},Eo=["src"],Io={onClick:()=>{}},To={class:"body-lab"},Mo=z(()=>o("h2",null,"Pedidos de acesso",-1)),No={key:0,class:"info-empty"},Qo=z(()=>o("h3",null,"Não a nenhum pedido de acesso para esse laboratório!",-1)),jo=[Qo],Bo={key:1},zo=z(()=>o("h2",null,"Projetos",-1)),Fo={key:0,class:"info-empty"},Ro=z(()=>o("h3",null,"Não a nenhum projeto no laboratório!",-1)),Ko=[Ro],Oo={key:1},Jo=z(()=>o("h2",null,"Descrição",-1)),Wo=z(()=>o("h2",null,"Sobre",-1)),Go=z(()=>o("div",{class:"text-h6"}," Confirme o nome do Laboratório ",-1)),Ho=Le({__name:"MyLaboratory",emits:["event"],setup(w){const pe=Me(),K=Ne(),n=Qe(),ee=ze(),O=Ee(),A=Ve();let r=f(),P=f(),V=f(""),b=f(!1),d=f(),J=f(!0),p=f(),h=f(!1),M=f(!1),S=f(!1);const oe=K.params.id;je(d,k=>{var s;k===((s=r.value)==null?void 0:s.nome)?J.value=!1:J.value=!0}),De(async()=>{await N()});async function N(){S.value=!0,oe==="true"?r.value=null:r.value=await O.getLaboratory(oe,A.getToken),P.value=n.getUser,p.value=n.getPedidosAtivos(),await Q(),S.value=!1}async function W(k){M.value=k,h.value=k,await N()}async function Q(){var k,s,F,$;if(((s=(k=r.value)==null?void 0:k.permissoes)==null?void 0:s.length)!==0){const R=($=(F=r.value)==null?void 0:F.permissoes)==null?void 0:$.find(x=>{var D;return x.id_user===((D=P.value)==null?void 0:D.id)});if(R){const D=(await ee.getPermissionsLab()).find(q=>q.id===R.id_perm);V.value=D==null?void 0:D.title}else V.value=""}else V.value=""}async function me(){b.value=!0}async function j(){var s;const k=await O.deleteLaboratorio(((s=r.value)==null?void 0:s.id)??"",A.getToken);k?pe.push("/pageAcess"):(b.value=!1,alert(k))}function ve(){h.value=!0}function B(){M.value=!0}return(k,s)=>{var F,$,R,x,D,q,te,E,ae,I,le,T,se,re,ne,G,ie;return e(S)?(u(),_("div",Do,[i(e(we),{size:"20px",color:"primary"})])):(u(),_("div",qo,[e(r)===null?(u(),_("div",wo,[So,m(o("button",{onClick:s[0]||(s[0]=Y(l=>ve(),["prevent"]))}," Crie seu Laboratório ",512),[[ue,(($=(F=e(P))==null?void 0:F.permissao)==null?void 0:$.title)==="Coordenador"]]),i(e(be),{modelValue:e(h),"onUpdate:modelValue":s[1]||(s[1]=l=>v(h)?h.value=l:h=l)},{default:L(()=>[i(xe,{tipo:1,onEvent:W})]),_:1},8,["modelValue"])])):(u(),_("div",Uo,[i(e(be),{modelValue:e(M),"onUpdate:modelValue":s[2]||(s[2]=l=>v(M)?M.value=l:M=l)},{default:L(()=>[i(xe,{tipo:2,laboratorio:e(r),onEvent:W},null,8,["laboratorio"])]),_:1},8,["modelValue"]),o("section",Ao,[o("div",Po,[e(r)&&e(r).image?(u(),_("img",{key:0,class:"img-avatar",src:`${(R=e(r))==null?void 0:R.image}`,alt:"Imagem do Laboratorio"},null,8,Eo)):ye("",!0),o("div",null,[o("h1",null,c((x=e(r))==null?void 0:x.nome),1),o("p",null,c((D=e(r))==null?void 0:D.descricao),1),o("span",Io,[i(e(qe),{name:"groups",size:"1.2rem"}),ge(" "+c((te=(q=e(r))==null?void 0:q.membros)==null?void 0:te.length),1)])]),o("button",{onClick:s[3]||(s[3]=l=>B())}," Editar o laboratório ")])]),o("section",To,[m(o("div",null,[Mo,((E=e(p))==null?void 0:E.length)===0?(u(),_("article",No,jo)):(u(),_("ul",Bo,[(u(!0),_(Z,null,Ce(e(p),l=>{var t,a;return u(),X($e,{key:l.id??"",type:7,"id-pend":l.id??"","id-user":l.id_user??"","id-lab":l.id_lab??"","nome-user":`${(t=l.usuario)==null?void 0:t.primeiro_nome} ${(a=l.usuario)==null?void 0:a.segundo_nome}`,"date-create":l.data_create??""},null,8,["id-pend","id-user","id-lab","nome-user","date-create"])}),128))]))],512),[[ue,e(V)==="Coordenador"||e(V)==="Supervisor"]]),m(i(e(_e),{class:"divider"},null,512),[[ue,e(V)==="Coordenador"||e(V)==="Supervisor"]]),o("div",null,[zo,((I=(ae=e(r))==null?void 0:ae.projetos)==null?void 0:I.length)===0||((T=(le=e(r))==null?void 0:le.projetos)==null?void 0:T.length)===null||((re=(se=e(r))==null?void 0:se.projetos)==null?void 0:re.length)===void 0?(u(),_("article",Fo,Ko)):(u(),_("ul",Oo,[(u(!0),_(Z,null,Ce((ne=e(r))==null?void 0:ne.projetos,l=>(u(),X($e,{key:l.id??"",type:3,"id-user":l.autor_id??"",title:l.titulo,summary:l.descricao,"id-lab":l.laboratorio_id??"","id-projeto":l.id??"","date-create":l.data_inicial??""},null,8,["id-user","title","summary","id-lab","id-projeto","date-create"]))),128))]))]),i(e(_e),{class:"divider",dark:""}),o("div",null,[Jo,o("p",null,c((G=e(r))==null?void 0:G.descricao),1)]),i(e(_e),{class:"divider",dark:""}),o("div",null,[Wo,o("p",null,c((ie=e(r))==null?void 0:ie.sobre),1)]),m(o("footer",null,[o("button",{onClick:s[4]||(s[4]=l=>me())}," Deletar Laboratorio ")],512),[[ue,e(V)==="Coordenador"]])]),i(e(be),{modelValue:e(b),"onUpdate:modelValue":s[8]||(s[8]=l=>v(b)?b.value=l:b=l)},{default:L(()=>[i(e(Ue),{class:"card-dialog"},{default:L(()=>[i(e(de),null,{default:L(()=>[Go]),_:1}),i(e(de),{class:"q-pt-none"},{default:L(()=>[m(o("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>v(d)?d.value=l:d=l),onKeyup:Be(()=>{},["enter"])},null,544),[[C,e(d)]])]),_:1}),i(e(Se),{align:"right",class:"text-primary"},{default:L(()=>[i(e(ce),{flat:"",label:"Cancelar",onClick:s[6]||(s[6]=Y(l=>v(b)?b.value=!1:b=!1,["prevent"]))}),i(e(ce),{disabled:e(J),flat:"",label:"Deletar",onClick:s[7]||(s[7]=Y(l=>j(),["prevent"]))},null,8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))]))}}}),at=Ie(Ho,[["__scopeId","data-v-f719873c"]]);export{at as default};
