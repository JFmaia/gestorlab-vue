import{ah as K,A as P,d as W,f as G,s as H,u as O,r as B,z as X,o as c,c as k,w as v,J as S,x as r,K as o,g as t,a3 as m,a,t as n,W as w,k as C,h as z,Q as q,F as h,j as $,a4 as L,i as Q,D as R,C as V,p as Y,e as Z}from"./index-DQb3qgME.js";import{p as _}from"./perm-B5m12WYu.js";import{l as ee}from"./laboratory-CLtynE2K.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae=K("projeto",{actions:{async createProjeto(e,d){try{return await P.post("/projetos",{titulo:e.titulo,image:e.image,descricao:e.descricao,laboratorio_id:e.id},{headers:{Authorization:`Bearer ${d}`}}),!0}catch(i){return i.response.data.detail}},async deleteProjeto(e,d){try{return await P.delete(`/projetos/${e}`,{headers:{Authorization:`Bearer ${d}`}}),!0}catch(i){return i.response.data.detail}},async getProject(e,d){try{return{project:(await P.get(`/projetos/${e}`,{headers:{Authorization:`Bearer ${d}`}})).data,message:""}}catch(i){return{project:null,message:i.response.data.detail}}},async getAllProjetos(e,d){try{const p=(await P.get("/projetos",{headers:{Authorization:`Bearer ${d}`}})).data.filter(x=>x.laboratorio_id===e);return p.length===0?{listProject:[],message:""}:{listProject:p,message:""}}catch(i){return{listProject:[],message:i.response.data.detail}}},async getListAllProjetos(e){try{const i=(await P.get("/projetos",{headers:{Authorization:`Bearer ${e}`}})).data;return i.length===0?{listProject:[],message:""}:{listProject:i,message:""}}catch(d){return{listProject:[],message:d.response.data.detail}}},async editProjeto(e,d,i){try{return await P.put(`/projetos/${d}`,{...e},{headers:{Authorization:`Bearer ${i}`}}),!0}catch(f){return f}},async addMember(e,d,i){try{return await P.post("/projetos/addMember",{idProjeto:e,idUsuario:d},{headers:{Authorization:`Bearer ${i}`}}),!0}catch(f){return f}},async deleteMember(e,d,i){console.log(e,d);try{return await P.delete(`/projetos/removeMember/${e}/${d}`,{headers:{Authorization:`Bearer ${i}`}}),!0}catch(f){return f}}}}),re=e=>(Y("data-v-a130dd90"),e=e(),Z(),e),se={class:"span-article"},le=re(()=>a("div",null,null,-1)),oe={class:"content-card"},ne=["value"],de={type:"submit"},ie={class:"span-article"},ue={class:"span-article"},ce={class:"span-article"},fe={st:""},me={class:"span-article"},ye={class:"content-card"},be=["value"],pe={style:{display:"flex","align-items":"center",gap:"10px"}},ke={type:"submit"},ve=W({__name:"MyCard",props:{idPend:{type:String,required:!1,default:""},type:{type:Number,required:!0},idUser:{type:String,required:!1,default:""},idLab:{type:String,required:!1,default:""},idProjeto:{type:String,required:!1,default:""},title:{type:String,required:!1,default:""},subTitle:{type:String,required:!1,default:""},summary:{type:String,required:!1,default:""},nomeUser:{type:String,required:!1,default:""},nomeLab:{type:String,required:!1,default:""},nomeProject:{type:String,required:!1,default:""},dateCreate:{type:String,required:!1,default:""}},setup(e){const d=G(),i=ae(),f=ee(),p=H(),x=_(),M=O(),y=e;let b=B(!1),j=B(!1),A=B(),g=B();X(async()=>{await F()});async function F(){y.type===1?A.value=await x.getPermissionsLab():A.value=await x.getPermissions()}async function N(){b.value=!0;const u={id_user:y.idUser,id_lab:y.idLab,token:p.getToken},s=await d.setInviteForLab(u);s===!0?(b.value=!1,alert("Pedido enviado!")):(b.value=!1,alert(s))}async function T(){var l;b.value=!0;const u={idUser:y.idUser,idLab:y.idLab,perm_id:(l=g.value)==null?void 0:l.id},s=await f.addMemberInLaboratorio(u,p.getToken);if(s){b.value=!1;const D=await f.deactivePending(y.idPend,p.getToken);D?(b.value=!1,await d.updateLaboratorio(y.idLab,p.getToken),M.push("/dashboard/membros")):(b.value=!1,alert(D))}else b.value=!1,alert(s)}async function E(){const u=await i.deleteMember(y.idProjeto,y.idUser,p.getToken);u?M.push("/dashboard/projetos"):alert(u)}async function U(){if(y.type===7){j.value=!0;const u=await f.deactivePending(y.idPend,p.getToken);u?(j.value=!1,await d.updateLaboratorio(y.idLab,p.getToken)):(j.value=!1,alert(u))}if(y.type===4){j.value=!0;const u=await f.deactivePending(y.idPend,p.getToken);u?(j.value=!1,M.push("/dashboard")):(j.value=!1,alert(u))}}function I(u){M.push({name:"profile",params:{id:u}})}function J(u){M.push({name:"laboratory",params:{id:u}})}return(u,s)=>(c(),k(h,null,[v(r(t(L),{dark:"",bordered:"",class:"my-card"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,[a("h1",null,n(e.title),1),a("p",null,n(e.subTitle),1)])]),_:1}),r(t(w),{dark:""}),r(t(m),null,{default:o(()=>[a("article",null,[a("span",se,n(e.summary),1),a("button",{onClick:s[0]||(s[0]=C(l=>N(),["prevent"]))},[t(b)?(c(),z(t(q),{key:0,size:"20px",color:"dark"})):(c(),k(h,{key:1},[$(" Se candidatar ")],64))])])]),_:1})]),_:1},512),[[S,e.type===0]]),le,v(r(t(L),{dark:"",bordered:"",class:"my-card-lab"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,n(e.nomeUser),1)]),_:1}),r(t(w),{dark:""}),r(t(m),{class:"card-section"},{default:o(()=>[a("form",{onSubmit:s[2]||(s[2]=C(l=>T(),["prevent"]))},[a("div",oe,[$(n(e.dateCreate)+" ",1),v(a("select",{id:"permitions",name:"permitions",required:"","onUpdate:modelValue":s[1]||(s[1]=l=>Q(g)?g.value=l:g=l)},[(c(!0),k(h,null,R(t(A),l=>(c(),k("option",{key:l.id,value:l},n(l.title),9,ne))),128))],512),[[V,t(g)]])]),a("button",de,[t(b)?(c(),z(t(q),{key:0,size:"20px",color:"dark"})):(c(),k(h,{key:1},[$(" Aceitar membro ")],64))])],32)]),_:1})]),_:1},512),[[S,e.type===1]]),v(r(t(L),{dark:"",bordered:"",class:"my-card-lab"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,[a("h1",null,n(e.title),1),a("p",null,n(e.dateCreate),1)])]),_:1}),r(t(w),{dark:""}),r(t(m),null,{default:o(()=>[a("article",null,[a("span",ie,n(e.summary),1)])]),_:1})]),_:1},512),[[S,e.type===2]]),v(r(t(L),{onClick:s[3]||(s[3]=C(l=>I(e.idUser),["prevent"])),dark:"",bordered:"",class:"my-card-member"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,[a("h1",null,n(e.title),1),a("p",null,n(e.dateCreate),1)])]),_:1}),r(t(w),{dark:""}),r(t(m),null,{default:o(()=>[a("span",ue,n(e.summary),1)]),_:1})]),_:1},512),[[S,e.type===3]]),v(r(t(L),{dark:"",bordered:"",class:"my-card-member"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,[a("h1",null,n(e.title),1),a("p",null,n(e.subTitle),1)])]),_:1}),r(t(w),{dark:""}),r(t(m),null,{default:o(()=>[a("span",ce,n(e.summary),1)]),_:1}),a("div",fe,[a("button",{onClick:s[4]||(s[4]=l=>U())},[t(b)?(c(),z(t(q),{key:0,size:"20px",color:"dark"})):(c(),k(h,{key:1},[$(" Cancelar Pedido ")],64))])])]),_:1},512),[[S,e.type===4]]),v(r(t(L),{onClick:s[5]||(s[5]=C(l=>J(e.idLab),["prevent"])),dark:"",bordered:"",class:"my-card-member"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,[a("h1",null,n(e.title),1),a("p",null,n(e.dateCreate),1)])]),_:1}),r(t(w),{dark:""}),r(t(m),null,{default:o(()=>[a("span",me,n(e.summary),1)]),_:1})]),_:1},512),[[S,e.type===5]]),v(r(t(L),{onClick:s[7]||(s[7]=C(l=>I(e.idUser),["prevent"])),dark:"",bordered:"",class:"my-card-member-project"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,[a("h1",null,n(e.title),1),a("p",null,n(e.dateCreate),1)])]),_:1}),r(t(w),{dark:""}),r(t(m),null,{default:o(()=>[a("button",{onClick:s[6]||(s[6]=C(l=>E(),["prevent"]))},[t(j)?(c(),z(t(q),{key:0,size:"20px",color:"dark"})):(c(),k(h,{key:1},[$(" Deletar membro ")],64))])]),_:1})]),_:1},512),[[S,e.type===6]]),v(r(t(L),{dark:"",bordered:"",class:"my-card-lab"},{default:o(()=>[r(t(m),null,{default:o(()=>[a("article",null,n(e.nomeUser),1)]),_:1}),r(t(w),{dark:""}),r(t(m),{class:"card-section"},{default:o(()=>[a("form",{onSubmit:s[10]||(s[10]=C(l=>T(),["prevent"]))},[a("div",ye,[$(n(e.dateCreate)+" ",1),v(a("select",{id:"permitions",name:"permitions",required:"","onUpdate:modelValue":s[8]||(s[8]=l=>Q(g)?g.value=l:g=l)},[(c(!0),k(h,null,R(t(A),l=>(c(),k("option",{key:l.id,value:l},n(l.title),9,be))),128))],512),[[V,t(g)]])]),a("div",pe,[a("button",ke,[t(b)?(c(),z(t(q),{key:0,size:"20px",color:"dark"})):(c(),k(h,{key:1},[$(" Aceitar Pedido ")],64))]),a("button",{onClick:s[9]||(s[9]=C(l=>U(),["prevent"]))},[t(j)?(c(),z(t(q),{key:0,size:"20px",color:"dark"})):(c(),k(h,{key:1},[$(" Recusar Pedido ")],64))])])],32)]),_:1})]),_:1},512),[[S,e.type===7]])],64))}}),Se=te(ve,[["__scopeId","data-v-a130dd90"]]);export{Se as M,ae as p};
